#include <16F887.h>
#fuses NOWDT, INTRC_IO, NOMCLR
#use delay(clock=12000000)  // n?i 8MHz

#define MOTOR_IN1  PIN_C0
#define MOTOR_IN2  PIN_C1
#define LIMIT_SW   PIN_A1

void motor_stop() {
   output_low(MOTOR_IN1);
   output_low(MOTOR_IN2);
}

void motor_forward() {
   output_high(MOTOR_IN1);
   output_low(MOTOR_IN2);
}

void main() {
   set_tris_a(0xFF);  // RA1 input
   set_tris_c(0x00);  // RC0, RC1 output

   motor_forward();   // Quay thu?n

   while (true) {
      if (input(LIMIT_SW)) {
         motor_stop();  // N?u nh?n công t?c thì d?ng
      }
   }
}

