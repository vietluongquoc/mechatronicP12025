#include <16F887.h>
#fuses XT, NOWDT, NOMCLR
#use delay(clock=12000000)

#define PIR       PIN_A0
#define LED_XANH  PIN_D2
#define LED_DO    PIN_D3
#define IN1       PIN_C0
#define IN2       PIN_C1

void motor_forward() {
   output_high(IN1);
   output_low(IN2);
}

void motor_stop() {
   output_low(IN1);
   output_low(IN2);
}

void motor_reverse() {
   output_low(IN1);
   output_high(IN2);
}

void main() {
   set_tris_a(0xFF); // RA0 là input
   set_tris_c(0x00); // Motor
   set_tris_d(0x00); // LED

   output_low(LED_XANH);
   output_low(LED_DO);
   motor_stop();

   while(TRUE) {
      if(input(PIR)) {
         output_high(LED_XANH);   // báo phát hi?n ngu?i
         output_high(LED_DO);     // dèn d? sáng khi motor ch?y
         motor_forward();
         delay_ms(3000);          // ch?y 3s

         motor_stop();
         output_low(LED_DO);
         delay_ms(2000);          // d?ng 2s

         output_high(LED_DO);     // báo quay ngu?c
         motor_reverse();
         delay_ms(3000);

         motor_stop();
         output_low(LED_DO);
         output_low(LED_XANH);
      }
   }
}

