#include <16F887.h>
#fuses XT, NOWDT, NOPUT, NOLVP
#use delay(clock=12000000)

#define SERVO PIN_C2

void servo_write(int angle) {
   int pulse_width = 500 + ((int32)angle * 2000 / 180);  // Xác d?nh th?i gian pulse cho góc
   output_high(SERVO);    // Kích ho?t tín hi?u PWM
   delay_us(pulse_width); // Duy trì trong th?i gian pulse
   output_low(SERVO);     // T?t tín hi?u PWM
   delay_ms(20 - pulse_width / 1000); // T?ng th?i gian là 20ms
}

void main() {
   set_tris_c(0x00); // C?u hình chân C2 làm output

   while(true) {
      servo_write(90);  // Ð?t servo ? góc 90°
   }
}

