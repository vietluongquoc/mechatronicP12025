#include <16F887.h>
#fuses INTRC_IO, NOWDT, NOLVP, NOPUT
#use delay(clock=12000000)

#define SERVO PIN_C2

void servo_write(int angle) {
   int pulse_width = 500 + ((int32)angle * 2000 / 180);
   output_high(SERVO);
   delay_us(pulse_width);
   output_low(SERVO);
   delay_ms(20 - pulse_width / 1000);
}

void main() {
   set_tris_c(0x00);
   int i; // ? ch? khai báo 1 l?n ? dây

   while(true) {
      for(i = 0; i <= 90; i++) {
         servo_write(i);
         delay_ms(30);
      }
      delay_ms(2000);

      for(i = 90; i >= 0; i--) {
         servo_write(i);
         delay_ms(30);
      }
      delay_ms(2000);
   }
}

